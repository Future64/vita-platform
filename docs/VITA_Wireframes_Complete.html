<!DOCTYPE html>
<html lang="fr" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VITA — Plateforme de Gouvernance Mondiale</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-base: #f8fafc; --bg-card: #ffffff; --bg-card-hover: #f1f5f9; --bg-elevated: #f1f5f9; --bg-code: #f8fafc;
            --border: rgba(0,0,0,0.08); --border-light: rgba(0,0,0,0.12);
            --text-primary: #0f172a; --text-secondary: #475569; --text-muted: #94a3b8;
            --accent-violet: #8b5cf6; --accent-pink: #ec4899; --accent-cyan: #06b6d4; --accent-blue: #3b82f6;
            --accent-green: #10b981; --accent-orange: #f97316; --accent-red: #ef4444; --accent-yellow: #fbbf24;
            --gradient-primary: linear-gradient(135deg, #8b5cf6, #ec4899);
            --diff-add-bg: rgba(16,185,129,0.1); --diff-remove-bg: rgba(239,68,68,0.1);
            --radius-sm: 0.5rem; --radius-md: 0.75rem; --radius-lg: 1rem; --radius-xl: 1.25rem;
            --shadow-sm: 0 1px 2px rgba(0,0,0,0.05);
            --map-land: #e2e8f0; --map-border: #cbd5e1; --map-bg: #f1f5f9;
        }
        [data-theme="dark"] {
            --bg-base: #0a0e1a; --bg-card: #111827; --bg-card-hover: #1a2234; --bg-elevated: #1e293b; --bg-code: #0f172a;
            --border: rgba(255,255,255,0.06); --border-light: rgba(255,255,255,0.1);
            --text-primary: #f1f5f9; --text-secondary: #94a3b8; --text-muted: #64748b;
            --shadow-sm: 0 1px 2px rgba(0,0,0,0.3);
            --map-land: #1e293b; --map-border: #334155; --map-bg: #0f172a;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Inter', sans-serif; background: var(--bg-base); color: var(--text-primary); line-height: 1.5; -webkit-font-smoothing: antialiased; transition: background 0.3s, color 0.3s; }
        .font-mono { font-family: 'JetBrains Mono', monospace; }
        
        /* Utilities */
        .flex { display: flex; } .flex-col { flex-direction: column; } .flex-1 { flex: 1; } .flex-wrap { flex-wrap: wrap; }
        .items-center { align-items: center; } .items-start { align-items: flex-start; }
        .justify-between { justify-content: space-between; } .justify-center { justify-content: center; }
        .gap-2 { gap: 0.5rem; } .gap-3 { gap: 0.75rem; } .gap-4 { gap: 1rem; } .gap-5 { gap: 1.25rem; }
        .w-full { width: 100%; } .min-w-0 { min-width: 0; } .shrink-0 { flex-shrink: 0; }
        .overflow-auto { overflow: auto; } .truncate { overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
        .text-center { text-align: center; } .text-right { text-align: right; }
        .font-medium { font-weight: 500; } .font-semibold { font-weight: 600; } .font-bold { font-weight: 700; }
        .text-xs { font-size: 0.75rem; } .text-sm { font-size: 0.875rem; } .text-base { font-size: 1rem; }
        .text-lg { font-size: 1.125rem; } .text-xl { font-size: 1.25rem; } .text-2xl { font-size: 1.5rem; } .text-4xl { font-size: 2.5rem; }
        .cursor-pointer { cursor: pointer; } .relative { position: relative; }
        .text-secondary { color: var(--text-secondary); } .text-muted { color: var(--text-muted); }
        .text-violet { color: var(--accent-violet); } .text-green { color: var(--accent-green); }
        .text-red { color: var(--accent-red); } .text-orange { color: var(--accent-orange); } .text-cyan { color: var(--accent-cyan); }
        .space-y-2 > * + * { margin-top: 0.5rem; } .space-y-3 > * + * { margin-top: 0.75rem; }
        .space-y-4 > * + * { margin-top: 1rem; } .space-y-5 > * + * { margin-top: 1.25rem; }

        /* Components */
        .card { background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius-xl); box-shadow: var(--shadow-sm); transition: all 0.2s; }
        .card:hover { border-color: var(--border-light); }
        .card-header { padding: 1rem 1.25rem; display: flex; align-items: center; justify-content: space-between; border-bottom: 1px solid var(--border); }
        .card-title { font-size: 0.9rem; font-weight: 600; }
        .card-content { padding: 1.25rem; }
        
        .btn { display: inline-flex; align-items: center; justify-content: center; gap: 0.5rem; font-size: 0.875rem; font-weight: 500; padding: 0.625rem 1rem; border-radius: var(--radius-md); border: none; cursor: pointer; transition: all 0.2s; white-space: nowrap; }
        .btn svg { width: 1rem; height: 1rem; }
        .btn-primary { background: var(--gradient-primary); color: white; }
        .btn-primary:hover { opacity: 0.9; transform: translateY(-1px); }
        .btn-secondary { background: var(--bg-elevated); color: var(--text-primary); border: 1px solid var(--border-light); }
        .btn-secondary:hover { background: var(--bg-card-hover); }
        .btn-ghost { background: transparent; color: var(--text-secondary); }
        .btn-ghost:hover { background: var(--bg-elevated); color: var(--text-primary); }
        .btn-sm { padding: 0.5rem 0.75rem; font-size: 0.8125rem; }
        .btn-icon { width: 2.5rem; height: 2.5rem; padding: 0; }
        .btn-icon-sm { width: 2rem; height: 2rem; padding: 0; }

        .badge { display: inline-flex; align-items: center; gap: 0.25rem; font-size: 0.6875rem; font-weight: 600; padding: 0.25rem 0.625rem; border-radius: 9999px; }
        .badge svg { width: 0.625rem; height: 0.625rem; }
        .badge-violet { background: rgba(139,92,246,0.15); color: var(--accent-violet); }
        .badge-pink { background: rgba(236,72,153,0.15); color: var(--accent-pink); }
        .badge-cyan { background: rgba(6,182,212,0.15); color: var(--accent-cyan); }
        .badge-green { background: rgba(16,185,129,0.15); color: var(--accent-green); }
        .badge-orange { background: rgba(249,115,22,0.15); color: var(--accent-orange); }
        .badge-red { background: rgba(239,68,68,0.15); color: var(--accent-red); }
        .badge-yellow { background: rgba(251,191,36,0.15); color: var(--accent-yellow); }

        .input { width: 100%; height: 2.5rem; padding: 0 1rem; font-size: 0.875rem; color: var(--text-primary); background: var(--bg-elevated); border: 1px solid var(--border); border-radius: var(--radius-md); outline: none; }
        .input::placeholder { color: var(--text-muted); }
        .input:focus { border-color: var(--accent-violet); }
        .input-wrapper { position: relative; }
        .input-wrapper svg { position: absolute; left: 1rem; top: 50%; transform: translateY(-50%); width: 1rem; height: 1rem; color: var(--text-muted); }
        .input-wrapper .input { padding-left: 2.75rem; }
        
        .select { height: 2.5rem; padding: 0 2.25rem 0 1rem; font-size: 0.875rem; color: var(--text-primary); background: var(--bg-elevated); border: 1px solid var(--border); border-radius: var(--radius-md); outline: none; appearance: none; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%2394a3b8' stroke-width='2'%3E%3Cpath d='m6 9 6 6 6-6'/%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: right 0.75rem center; cursor: pointer; }

        .avatar { display: flex; align-items: center; justify-content: center; border-radius: 50%; background: var(--gradient-primary); color: white; font-weight: 600; flex-shrink: 0; }
        .avatar-sm { width: 2rem; height: 2rem; font-size: 0.7rem; }
        .avatar-md { width: 2.5rem; height: 2.5rem; font-size: 0.875rem; }
        .avatar-xl { width: 5rem; height: 5rem; font-size: 1.5rem; border-radius: var(--radius-xl); }
        .avatar-cyan { background: linear-gradient(135deg, #06b6d4, #3b82f6); }
        .avatar-orange { background: linear-gradient(135deg, #f97316, #ec4899); }

        .progress { width: 100%; height: 6px; background: var(--bg-elevated); border-radius: 9999px; overflow: hidden; }
        .progress-bar { height: 100%; border-radius: 9999px; background: var(--gradient-primary); transition: width 0.5s; }
        .progress-cyan .progress-bar { background: linear-gradient(135deg, #06b6d4, #3b82f6); }
        .progress-green .progress-bar { background: linear-gradient(135deg, #10b981, #06b6d4); }

        .tabs { display: flex; gap: 0.25rem; padding: 0.25rem; background: var(--bg-elevated); border-radius: var(--radius-lg); overflow-x: auto; }
        .tab { padding: 0.5rem 1rem; font-size: 0.8125rem; font-weight: 500; color: var(--text-muted); background: transparent; border: none; border-radius: var(--radius-md); cursor: pointer; white-space: nowrap; transition: all 0.2s; }
        .tab:hover { color: var(--text-secondary); }
        .tab[data-active="true"] { color: var(--text-primary); background: var(--bg-card); box-shadow: var(--shadow-sm); }

        .sub-tabs { display: flex; gap: 0.5rem; border-bottom: 1px solid var(--border); overflow-x: auto; margin-bottom: 1.5rem; }
        .sub-tab { padding: 0.75rem 1rem; font-size: 0.8125rem; font-weight: 500; color: var(--text-muted); background: transparent; border: none; border-bottom: 2px solid transparent; cursor: pointer; white-space: nowrap; margin-bottom: -1px; }
        .sub-tab:hover { color: var(--text-secondary); }
        .sub-tab[data-active="true"] { color: var(--accent-violet); border-bottom-color: var(--accent-violet); }

        .theme-toggle { display: flex; padding: 0.25rem; background: var(--bg-elevated); border-radius: var(--radius-md); border: 1px solid var(--border); }
        .theme-btn { display: flex; align-items: center; justify-content: center; width: 2rem; height: 2rem; border-radius: calc(var(--radius-md) - 2px); border: none; background: transparent; color: var(--text-muted); cursor: pointer; }
        .theme-btn svg { width: 1rem; height: 1rem; }
        .theme-btn:hover { color: var(--text-secondary); }
        .theme-btn[data-active="true"] { background: var(--bg-card); color: var(--text-primary); box-shadow: var(--shadow-sm); }

        /* Layout */
        .top-nav { position: sticky; top: 0; z-index: 100; background: var(--bg-card); border-bottom: 1px solid var(--border); }
        [data-theme="dark"] .top-nav { background: rgba(17,24,39,0.95); backdrop-filter: blur(12px); }
        .top-nav-inner { display: flex; align-items: center; justify-content: space-between; height: 4rem; padding: 0 1rem; }
        @media (min-width: 768px) { .top-nav-inner { padding: 0 1.5rem; } }

        .logo { display: flex; align-items: center; gap: 0.75rem; }
        .logo-icon { width: 2.25rem; height: 2.25rem; display: flex; align-items: center; justify-content: center; background: var(--gradient-primary); border-radius: var(--radius-md); font-weight: 800; font-size: 1rem; color: white; }
        .logo-text { font-size: 1.125rem; font-weight: 700; background: var(--gradient-primary); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }

        .menu-btn { display: flex; align-items: center; justify-content: center; width: 2.5rem; height: 2.5rem; background: var(--bg-elevated); border: 1px solid var(--border); border-radius: var(--radius-md); color: var(--text-secondary); cursor: pointer; }
        .menu-btn:hover { background: var(--bg-card-hover); }
        .menu-btn svg { width: 1.25rem; height: 1.25rem; }
        @media (min-width: 1024px) { .menu-btn { display: none; } }

        .nav-items { display: none; gap: 0.25rem; }
        @media (min-width: 1024px) { .nav-items { display: flex; } }
        .nav-item { display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 0.875rem; font-size: 0.875rem; font-weight: 500; color: var(--text-muted); background: transparent; border: none; border-radius: var(--radius-md); cursor: pointer; transition: all 0.2s; }
        .nav-item:hover { color: var(--text-primary); background: var(--bg-elevated); }
        .nav-item[data-active="true"] { color: white; background: var(--gradient-primary); }
        .nav-item svg { width: 1.125rem; height: 1.125rem; }

        .nav-right { display: flex; align-items: center; gap: 0.75rem; }
        @media (min-width: 768px) { .nav-right { gap: 1rem; } }
        .notification-btn { position: relative; }
        .notification-badge { position: absolute; top: -4px; right: -4px; width: 1rem; height: 1rem; display: flex; align-items: center; justify-content: center; font-size: 0.625rem; font-weight: 600; background: var(--accent-pink); color: white; border-radius: 50%; }

        .mobile-menu { display: none; position: fixed; inset: 0; z-index: 200; }
        .mobile-menu.open { display: block; }
        .mobile-menu-overlay { position: absolute; inset: 0; background: rgba(0,0,0,0.5); backdrop-filter: blur(4px); }
        .mobile-menu-content { position: absolute; top: 0; left: 0; bottom: 0; width: 300px; max-width: 90vw; background: var(--bg-card); border-right: 1px solid var(--border); padding: 1.25rem; overflow-y: auto; }
        .mobile-menu-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 1.5rem; padding-bottom: 1.25rem; border-bottom: 1px solid var(--border); }
        .mobile-nav-item { display: flex; align-items: center; gap: 0.75rem; width: 100%; padding: 0.875rem 1rem; font-size: 0.9375rem; font-weight: 500; color: var(--text-secondary); background: transparent; border: none; border-radius: var(--radius-md); cursor: pointer; text-align: left; margin-bottom: 0.25rem; }
        .mobile-nav-item:hover { color: var(--text-primary); background: var(--bg-elevated); }
        .mobile-nav-item[data-active="true"] { color: white; background: var(--gradient-primary); }
        .mobile-nav-item svg { width: 1.25rem; height: 1.25rem; }

        .sidebar { display: none; width: 16rem; background: var(--bg-card); border-right: 1px solid var(--border); padding: 1.25rem; flex-shrink: 0; overflow-y: auto; }
        @media (min-width: 1024px) { .sidebar { display: block; } }
        .sidebar-title { font-size: 0.6875rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; color: var(--text-muted); margin-bottom: 0.75rem; padding-left: 0.75rem; }
        .sidebar-item { display: flex; align-items: center; gap: 0.75rem; width: 100%; padding: 0.75rem; font-size: 0.875rem; font-weight: 500; color: var(--text-secondary); background: transparent; border: none; border-radius: var(--radius-md); cursor: pointer; text-align: left; transition: all 0.2s; }
        .sidebar-item:hover { color: var(--text-primary); background: var(--bg-elevated); }
        .sidebar-item[data-active="true"] { color: white; background: var(--gradient-primary); }
        .sidebar-item svg { width: 1.125rem; height: 1.125rem; opacity: 0.7; }
        .sidebar-item[data-active="true"] svg { opacity: 1; }
        .sidebar-item .badge { margin-left: auto; }

        .main { flex: 1; overflow-y: auto; padding: 1.25rem; }
        @media (min-width: 768px) { .main { padding: 1.5rem; } }
        @media (min-width: 1024px) { .main { padding: 2rem; } }
        .app-layout { display: flex; min-height: calc(100vh - 4rem); }

        .page-header { display: flex; flex-direction: column; gap: 1rem; margin-bottom: 1.5rem; }
        .page-title { font-size: 1.5rem; font-weight: 700; }
        .page-description { font-size: 0.875rem; color: var(--text-muted); }
        @media (min-width: 640px) { .page-header { flex-direction: row; align-items: center; justify-content: space-between; } }

        .grid-2 { display: grid; grid-template-columns: 1fr; gap: 1rem; }
        .grid-3 { display: grid; grid-template-columns: 1fr; gap: 1rem; }
        .grid-4 { display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem; }
        @media (min-width: 640px) { .grid-2 { grid-template-columns: repeat(2, 1fr); } }
        @media (min-width: 768px) { .grid-3 { grid-template-columns: repeat(2, 1fr); } .grid-4 { grid-template-columns: repeat(4, 1fr); } }
        @media (min-width: 1024px) { .grid-3 { grid-template-columns: repeat(3, 1fr); } }
        .grid-main { display: grid; grid-template-columns: 1fr; gap: 1.25rem; }
        @media (min-width: 1024px) { .grid-main { grid-template-columns: 2fr 1fr; gap: 1.5rem; } }

        /* Stat Card */
        .stat-card { padding: 1.25rem; border-radius: var(--radius-xl); position: relative; overflow: hidden; }
        .stat-card::before { content: ''; position: absolute; top: 0; right: 0; width: 100px; height: 100px; filter: blur(40px); opacity: 0.3; border-radius: 50%; }
        .stat-card-violet { background: linear-gradient(135deg, rgba(139,92,246,0.15), rgba(139,92,246,0.05)); border: 1px solid rgba(139,92,246,0.2); }
        .stat-card-violet::before { background: var(--accent-violet); }
        .stat-card-pink { background: linear-gradient(135deg, rgba(236,72,153,0.15), rgba(236,72,153,0.05)); border: 1px solid rgba(236,72,153,0.2); }
        .stat-card-pink::before { background: var(--accent-pink); }
        .stat-card-cyan { background: linear-gradient(135deg, rgba(6,182,212,0.15), rgba(6,182,212,0.05)); border: 1px solid rgba(6,182,212,0.2); }
        .stat-card-cyan::before { background: var(--accent-cyan); }
        .stat-card-green { background: linear-gradient(135deg, rgba(16,185,129,0.15), rgba(16,185,129,0.05)); border: 1px solid rgba(16,185,129,0.2); }
        .stat-card-green::before { background: var(--accent-green); }
        .stat-card-orange { background: linear-gradient(135deg, rgba(249,115,22,0.15), rgba(249,115,22,0.05)); border: 1px solid rgba(249,115,22,0.2); }
        .stat-card-orange::before { background: var(--accent-orange); }
        .stat-label { font-size: 0.75rem; font-weight: 500; color: var(--text-secondary); margin-bottom: 0.5rem; }
        .stat-value { font-size: 1.75rem; font-weight: 700; }
        .stat-trend { display: inline-flex; align-items: center; gap: 0.25rem; font-size: 0.75rem; font-weight: 500; padding: 0.125rem 0.5rem; border-radius: 9999px; margin-top: 0.5rem; }
        .stat-trend svg { width: 0.75rem; height: 0.75rem; }
        .stat-trend-up { background: rgba(16,185,129,0.15); color: var(--accent-green); }

        /* Branch/Commit items */
        .branch-item { display: flex; align-items: center; gap: 0.75rem; padding: 0.875rem 1rem; background: var(--bg-elevated); border-radius: var(--radius-lg); cursor: pointer; transition: all 0.2s; }
        .branch-item:hover { background: var(--bg-card-hover); }
        .branch-icon { width: 2.25rem; height: 2.25rem; display: flex; align-items: center; justify-content: center; border-radius: var(--radius-md); flex-shrink: 0; }
        .branch-icon svg { width: 1rem; height: 1rem; }
        .branch-icon-violet { background: rgba(139,92,246,0.15); color: var(--accent-violet); }
        .branch-icon-green { background: rgba(16,185,129,0.15); color: var(--accent-green); }
        .branch-icon-cyan { background: rgba(6,182,212,0.15); color: var(--accent-cyan); }
        .branch-icon-orange { background: rgba(249,115,22,0.15); color: var(--accent-orange); }

        .commit-item { display: flex; gap: 0.75rem; padding: 1rem 0; border-bottom: 1px solid var(--border); }
        .commit-item:last-child { border-bottom: none; }
        .commit-line { display: flex; flex-direction: column; align-items: center; width: 1.5rem; flex-shrink: 0; }
        .commit-dot { width: 0.75rem; height: 0.75rem; border-radius: 50%; background: var(--accent-violet); flex-shrink: 0; }
        .commit-connector { width: 2px; flex: 1; background: var(--border); margin-top: 0.25rem; }

        /* File tree */
        .file-tree { font-size: 0.875rem; }
        .file-tree-item { display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 0.75rem; border-radius: var(--radius-md); cursor: pointer; transition: all 0.2s; }
        .file-tree-item:hover { background: var(--bg-elevated); }
        .file-tree-item[data-active="true"] { background: rgba(139,92,246,0.1); color: var(--accent-violet); }
        .file-tree-item svg { width: 1rem; height: 1rem; flex-shrink: 0; }
        .file-tree-children { margin-left: 1.25rem; border-left: 1px solid var(--border); }

        /* Diff view */
        .diff-container { font-family: 'JetBrains Mono', monospace; font-size: 0.8125rem; line-height: 1.6; background: var(--bg-code); border-radius: var(--radius-lg); overflow: hidden; }
        .diff-header { padding: 0.75rem 1rem; background: var(--bg-elevated); border-bottom: 1px solid var(--border); font-weight: 500; }
        .diff-line { display: flex; padding: 0 1rem; }
        .diff-line-number { width: 3rem; text-align: right; padding-right: 1rem; color: var(--text-muted); user-select: none; flex-shrink: 0; }
        .diff-line-content { flex: 1; padding: 0.125rem 0; white-space: pre-wrap; word-break: break-word; }
        .diff-add { background: var(--diff-add-bg); border-left: 3px solid var(--accent-green); }
        .diff-add .diff-line-content::before { content: '+'; color: var(--accent-green); margin-right: 0.5rem; }
        .diff-remove { background: var(--diff-remove-bg); border-left: 3px solid var(--accent-red); }
        .diff-remove .diff-line-content::before { content: '-'; color: var(--accent-red); margin-right: 0.5rem; }

        /* Vote */
        .vote-bar { display: flex; height: 6px; background: var(--bg-elevated); border-radius: 9999px; overflow: hidden; }
        .vote-bar-pour { background: var(--accent-green); }
        .vote-bar-contre { background: var(--accent-red); }
        .vote-buttons { display: flex; gap: 0.5rem; }
        .vote-btn { flex: 1; display: flex; align-items: center; justify-content: center; gap: 0.5rem; padding: 0.75rem 1rem; font-size: 0.875rem; font-weight: 600; border: 2px solid; border-radius: var(--radius-lg); cursor: pointer; background: transparent; }
        .vote-btn svg { width: 1.125rem; height: 1.125rem; }
        .vote-btn-pour { border-color: rgba(16,185,129,0.3); color: var(--accent-green); }
        .vote-btn-pour:hover { background: rgba(16,185,129,0.1); border-color: var(--accent-green); }
        .vote-btn-contre { border-color: rgba(239,68,68,0.3); color: var(--accent-red); }
        .vote-btn-contre:hover { background: rgba(239,68,68,0.1); border-color: var(--accent-red); }
        .vote-btn-abstention { border-color: var(--border-light); color: var(--text-muted); }
        .vote-btn-abstention:hover { background: var(--bg-elevated); }

        /* Article block */
        .article-block { padding: 1.25rem; background: var(--bg-elevated); border-radius: var(--radius-lg); border-left: 4px solid var(--accent-violet); }
        .article-number { font-size: 0.75rem; font-weight: 600; color: var(--accent-violet); text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 0.5rem; }
        .article-title { font-size: 1rem; font-weight: 600; margin-bottom: 0.75rem; }
        .article-content { font-size: 0.9375rem; color: var(--text-secondary); line-height: 1.7; }

        /* Timeline */
        .timeline { display: flex; align-items: flex-start; overflow-x: auto; padding-bottom: 0.5rem; }
        .timeline-step { display: flex; flex-direction: column; align-items: center; text-align: center; flex-shrink: 0; }
        .timeline-icon { width: 2.5rem; height: 2.5rem; display: flex; align-items: center; justify-content: center; border-radius: 50%; background: var(--bg-elevated); color: var(--text-muted); margin-bottom: 0.5rem; }
        .timeline-icon svg { width: 1rem; height: 1rem; }
        .timeline-step[data-state="completed"] .timeline-icon { background: rgba(16,185,129,0.15); color: var(--accent-green); }
        .timeline-step[data-state="active"] .timeline-icon { background: var(--gradient-primary); color: white; }
        .timeline-label { font-size: 0.6875rem; font-weight: 500; color: var(--text-secondary); }
        .timeline-connector { flex: 0 0 2rem; height: 2px; margin: 1.25rem 0.25rem 0; background: var(--bg-elevated); border-radius: 9999px; }
        .timeline-connector[data-state="completed"] { background: var(--accent-green); }
        .timeline-connector[data-state="active"] { background: var(--gradient-primary); }
        @media (min-width: 768px) { .timeline-step { flex: 1; } .timeline-connector { flex: 1; margin: 1.25rem 0.5rem 0; } }

        .merge-indicator { display: flex; align-items: center; gap: 0.75rem; padding: 1rem; background: rgba(16,185,129,0.1); border: 1px solid rgba(16,185,129,0.2); border-radius: var(--radius-lg); }
        .merge-indicator svg { width: 1.25rem; height: 1.25rem; color: var(--accent-green); }

        .separator { height: 1px; background: var(--border); margin: 1rem 0; }
        .screen-selector { display: none; }
        @media (min-width: 768px) { .screen-selector { display: block; } }

        /* Map */
        .world-map-container { position: relative; width: 100%; height: 280px; background: var(--map-bg); border-radius: var(--radius-lg); overflow: hidden; }
        @media (min-width: 768px) { .world-map-container { height: 320px; } }
        .world-map-svg { width: 100%; height: 100%; }
        .world-map-svg .land { fill: var(--map-land); stroke: var(--map-border); stroke-width: 0.5; transition: fill 0.3s; }
        .world-map-svg .land:hover { fill: var(--accent-violet); fill-opacity: 0.3; }
        .map-marker { cursor: pointer; }
        .map-marker-pulse { animation: pulse-marker 2s ease-in-out infinite; }
        @keyframes pulse-marker { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .map-legend { position: absolute; bottom: 1rem; left: 1rem; background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius-md); padding: 0.75rem; display: flex; flex-direction: column; gap: 0.5rem; }
        .map-legend-item { display: flex; align-items: center; gap: 0.5rem; font-size: 0.6875rem; color: var(--text-secondary); }
        .map-legend-dot { width: 8px; height: 8px; border-radius: 50%; }
        .map-stats { position: absolute; top: 1rem; right: 1rem; }
        .map-stat-item { background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius-md); padding: 0.5rem 0.75rem; text-align: right; }
        .map-stat-value { font-size: 1rem; font-weight: 700; }
        .map-stat-label { font-size: 0.625rem; color: var(--text-muted); text-transform: uppercase; }

        .doc-preview { padding: 1rem; background: var(--bg-elevated); border-radius: var(--radius-lg); display: flex; align-items: center; gap: 0.75rem; cursor: pointer; }
        .doc-preview:hover { background: var(--bg-card-hover); }
        .doc-icon { width: 2.5rem; height: 2.5rem; display: flex; align-items: center; justify-content: center; background: rgba(239,68,68,0.15); color: var(--accent-red); border-radius: var(--radius-md); flex-shrink: 0; }
        .doc-icon svg { width: 1.125rem; height: 1.125rem; }
        .doc-icon-green { background: rgba(16,185,129,0.15); color: var(--accent-green); }

        .comment { display: flex; gap: 0.75rem; }
        .comment-content { flex: 1; padding: 0.875rem 1rem; background: var(--bg-elevated); border-radius: var(--radius-lg); }
    </style>
</head>
<body>
    <div class="mobile-menu" id="mobileMenu">
        <div class="mobile-menu-overlay" onclick="closeMobileMenu()"></div>
        <div class="mobile-menu-content">
            <div class="mobile-menu-header">
                <div class="logo"><div class="logo-icon">Ѵ</div><span class="logo-text">VITA</span></div>
                <button class="btn btn-ghost btn-icon-sm" onclick="closeMobileMenu()"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6 6 18M6 6l12 12"/></svg></button>
            </div>
            <div class="space-y-2" id="mobile-nav-container"></div>
            <div class="separator"></div>
            <div><label class="text-xs text-muted" style="display:block;margin-bottom:0.5rem">Écran</label><select class="select w-full" id="mobileScreenSelector" onchange="changeScreen(this.value);closeMobileMenu();"></select></div>
        </div>
    </div>
    <nav class="top-nav">
        <div class="top-nav-inner">
            <div class="flex items-center gap-4">
                <button class="menu-btn" onclick="openMobileMenu()"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/></svg></button>
                <div class="logo"><div class="logo-icon">Ѵ</div><span class="logo-text">VITA</span></div>
                <div class="nav-items" id="nav-container"></div>
            </div>
            <div class="nav-right">
                <div class="theme-toggle">
                    <button class="theme-btn" onclick="setTheme('light')"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="4"/><path d="M12 2v2M12 20v2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M2 12h2M20 12h2M6.34 17.66l-1.41 1.41M19.07 4.93l-1.41 1.41"/></svg></button>
                    <button class="theme-btn" onclick="setTheme('dark')"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"/></svg></button>
                </div>
                <div class="screen-selector"><select class="select" id="screenSelector" onchange="changeScreen(this.value)" style="width:180px"></select></div>
                <button class="btn btn-ghost btn-icon notification-btn"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"/><path d="M10.3 21a1.94 1.94 0 0 0 3.4 0"/></svg><span class="notification-badge">5</span></button>
                <div class="avatar avatar-md">JD</div>
            </div>
        </div>
    </nav>
    <div id="app-content"></div>
<script>
const I={flame:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"/></svg>',scroll:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M8 21h12a2 2 0 0 0 2-2v-2H10v2a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v3h4"/><path d="M19 17V5a2 2 0 0 0-2-2H4"/></svg>',fileText:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><path d="M14 2v6h6"/><path d="M16 13H8M16 17H8M10 9H8"/></svg>',vote:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m9 12 2 2 4-4"/><path d="M5 7c0-1.1.9-2 2-2h10a2 2 0 0 1 2 2v12H5V7Z"/><path d="M22 19H2"/></svg>',messages:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 9a2 2 0 0 1-2 2H6l-4 4V4c0-1.1.9-2 2-2h8a2 2 0 0 1 2 2v5Z"/><path d="M18 9h2a2 2 0 0 1 2 2v11l-4-4h-6a2 2 0 0 1-2-2v-1"/></svg>',archive:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect width="20" height="5" x="2" y="3" rx="1"/><path d="M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8"/><path d="M10 12h4"/></svg>',user:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="8" r="5"/><path d="M20 21a8 8 0 1 0-16 0"/></svg>',wallet:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 12V7H5a2 2 0 0 1 0-4h14v4"/><path d="M3 5v14a2 2 0 0 0 2 2h16v-5"/><path d="M18 12a2 2 0 0 0 0 4h4v-4Z"/></svg>',users:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 21a8 8 0 0 0-16 0"/><circle cx="10" cy="8" r="5"/><path d="M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3"/></svg>',history:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/><path d="M12 7v5l4 2"/></svg>',settings:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/><circle cx="12" cy="12" r="3"/></svg>',globe:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"/><path d="M2 12h20"/></svg>',coins:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="8" cy="8" r="6"/><path d="M18.09 10.37A6 6 0 1 1 10.34 18"/><path d="M7 6h1v4"/></svg>',plus:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5v14"/></svg>',search:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>',arrowLeft:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m12 19-7-7 7-7M19 12H5"/></svg>',arrowDown:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 5v14M5 12l7 7 7-7"/></svg>',arrowUp:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m5 12 7-7 7 7M12 19V5"/></svg>',trendUp:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m22 7-8.5 8.5-5-5L2 17"/><path d="M16 7h6v6"/></svg>',message:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M7.9 20A9 9 0 1 0 4 16.1L2 22Z"/></svg>',lightbulb:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5M9 18h6M10 22h4"/></svg>',check:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 6 9 17l-5-5"/></svg>',x:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6 6 18M6 6l12 12"/></svg>',send:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m22 2-7 20-4-9-9-4Z M22 2 11 13"/></svg>',qrcode:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect width="5" height="5" x="3" y="3" rx="1"/><rect width="5" height="5" x="16" y="3" rx="1"/><rect width="5" height="5" x="3" y="16" rx="1"/></svg>',download:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3"/></svg>',edit:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5ZM15 5l4 4"/></svg>',info:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4M12 8h.01"/></svg>',gitBranch:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="6" x2="6" y1="3" y2="15"/><circle cx="18" cy="6" r="3"/><circle cx="6" cy="18" r="3"/><path d="M18 9a9 9 0 0 1-9 9"/></svg>',gitCommit:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><line x1="3" x2="9" y1="12" y2="12"/><line x1="15" x2="21" y1="12" y2="12"/></svg>',gitMerge:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="18" cy="18" r="3"/><circle cx="6" cy="6" r="3"/><path d="M6 21V9a9 9 0 0 0 9 9"/></svg>',gitPullRequest:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="18" cy="18" r="3"/><circle cx="6" cy="6" r="3"/><path d="M13 6h3a2 2 0 0 1 2 2v7"/><line x1="6" x2="6" y1="9" y2="21"/></svg>',gitFork:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="18" r="3"/><circle cx="6" cy="6" r="3"/><circle cx="18" cy="6" r="3"/><path d="M18 9v2c0 .6-.4 1-1 1H7c-.6 0-1-.4-1-1V9"/><path d="M12 12v3"/></svg>',book:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20"/></svg>',scale:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1ZM2 16l3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1ZM7 21h10M12 3v18M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2"/></svg>',folder:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z"/></svg>',folderOpen:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2"/></svg>',file:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><path d="M14 2v6h6"/></svg>',fileDiff:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><path d="M14 2v6h6"/><path d="M12 18v-6"/><path d="M9 10h6"/></svg>',eye:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/></svg>',link:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg>',checkCircle:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><path d="m9 11 3 3L22 4"/></svg>',clock:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>',thumbsUp:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M7 10v12M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z"/></svg>',thumbsDown:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 14V2M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22h0a3.13 3.13 0 0 1-3-3.88Z"/></svg>',minus:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14"/></svg>',barChart:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" x2="12" y1="20" y2="10"/><line x1="18" x2="18" y1="20" y2="4"/><line x1="6" x2="6" y1="20" y2="16"/></svg>',layers:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z"/><path d="m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65"/><path d="m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65"/></svg>',copy:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></svg>',externalLink:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" x2="21" y1="14" y2="3"/></svg>'};

const modules=[{id:'agora',label:'Agora',icon:'flame'},{id:'codex',label:'Codex',icon:'book'},{id:'forge',label:'Forge',icon:'gitBranch'},{id:'civis',label:'Civis',icon:'user'},{id:'panorama',label:'Panorama',icon:'globe'}];
const screensByModule={agora:[{id:'agora-list',label:'Propositions'},{id:'agora-detail',label:'Détail'}],codex:[{id:'codex-constitution',label:'Constitution'},{id:'codex-laws',label:'Lois'},{id:'codex-article',label:'Article'}],forge:[{id:'forge-projects',label:'Projets'},{id:'forge-branches',label:'Branches'},{id:'forge-commits',label:'Commits'},{id:'forge-merge',label:'Merge Request'},{id:'forge-diff',label:'Diff'}],civis:[{id:'civis-profile',label:'Profil'},{id:'civis-wallet',label:'Portefeuille'}],panorama:[{id:'panorama-dashboard',label:'Dashboard'}]};

let currentModule='agora',currentScreen='agora-list';
function openMobileMenu(){document.getElementById('mobileMenu').classList.add('open')}
function closeMobileMenu(){document.getElementById('mobileMenu').classList.remove('open')}
function setTheme(t){document.documentElement.setAttribute('data-theme',t);document.querySelectorAll('.theme-btn').forEach((b,i)=>b.setAttribute('data-active',i===(t==='light'?0:1)?'true':'false'));localStorage.setItem('vita-theme',t)}
setTheme(localStorage.getItem('vita-theme')||'dark');

function buildNav(){let h=modules.map(m=>`<button class="nav-item" data-active="${m.id===currentModule}" id="nav-${m.id}" onclick="setModule('${m.id}')">${I[m.icon]} ${m.label}</button>`).join('');document.getElementById('nav-container').innerHTML=h;let mh=modules.map(m=>`<button class="mobile-nav-item" data-active="${m.id===currentModule}" onclick="setModule('${m.id}');closeMobileMenu();">${I[m.icon]} ${m.label}</button>`).join('');document.getElementById('mobile-nav-container').innerHTML=mh;let sh='';Object.entries(screensByModule).forEach(([mod,scr])=>{sh+=`<optgroup label="${mod.toUpperCase()}">${scr.map(s=>`<option value="${s.id}">${s.label}</option>`).join('')}</optgroup>`});document.getElementById('screenSelector').innerHTML=sh;document.getElementById('mobileScreenSelector').innerHTML=sh}

function getSidebar(items){return `<aside class="sidebar"><div class="sidebar-section"><div class="sidebar-title">Menu</div><div class="space-y-2">${items.map(i=>`<button class="sidebar-item" data-active="${i.active||false}" ${i.onclick?`onclick="${i.onclick}"`:``}>${I[i.icon]}<span class="flex-1" style="text-align:left">${i.label}</span>${i.badge?`<span class="badge badge-${i.badgeType||'violet'}">${i.badge}</span>`:''}</button>`).join('')}</div></div></aside>`}

// AGORA
function getAgoraListScreen(){return `<div class="app-layout">${getSidebar([{icon:'flame',label:'En cours',badge:'12',badgeType:'pink',active:true},{icon:'scroll',label:'Doléances',badge:'8',badgeType:'orange'},{icon:'fileText',label:'Propositions'},{icon:'vote',label:'Votes actifs',badge:'3',badgeType:'green'},{icon:'archive',label:'Archives'}])}<main class="main"><div class="page-header"><div><h1 class="page-title">Propositions</h1><p class="page-description">12 propositions actives</p></div><button class="btn btn-primary">${I.plus} Nouvelle</button></div><div class="flex flex-wrap gap-3" style="margin-bottom:1.25rem"><div class="input-wrapper flex-1" style="max-width:320px">${I.search}<input type="text" class="input" placeholder="Rechercher..."></div><select class="select"><option>Tous domaines</option></select></div><div class="tabs" style="margin-bottom:1.25rem;display:inline-flex"><button class="tab" data-active="true">Toutes</button><button class="tab">En vote</button><button class="tab">Collaboratif</button></div><div class="space-y-4"><div class="card" style="padding:1.25rem;cursor:pointer" onclick="changeScreen('agora-detail')"><div class="flex flex-wrap gap-2" style="margin-bottom:0.75rem"><span class="badge badge-orange">Économie</span><span class="badge badge-green">Vote</span></div><h3 class="text-base font-semibold" style="margin-bottom:0.375rem">Révision du coefficient PPA</h3><p class="text-sm text-secondary" style="margin-bottom:1rem">Adapter le coefficient selon les variations régionales.</p><div class="flex flex-wrap items-center gap-4"><div class="flex items-center gap-2"><div class="avatar avatar-sm">MD</div><span class="text-sm">Marie D.</span></div><span class="text-xs text-muted">2j</span><div class="flex items-center gap-3" style="margin-left:auto"><span class="text-sm font-semibold text-green">67%</span><div class="vote-bar" style="width:5rem"><div class="vote-bar-pour" style="width:67%"></div><div class="vote-bar-contre" style="width:23%"></div></div></div></div></div><div class="card" style="padding:1.25rem;cursor:pointer" onclick="changeScreen('forge-merge')"><div class="flex flex-wrap gap-2" style="margin-bottom:0.75rem"><span class="badge badge-green">Environnement</span><span class="badge badge-cyan">${I.gitBranch} 3 branches</span></div><h3 class="text-base font-semibold" style="margin-bottom:0.375rem">Fonds urgence climatique</h3><p class="text-sm text-secondary" style="margin-bottom:1rem">Financement collectif pour actions climatiques.</p><div class="flex flex-wrap items-center gap-4"><div class="flex items-center gap-2"><div class="avatar avatar-sm avatar-cyan">LT</div><span class="text-sm">Lucas T.</span></div><span class="text-xs text-muted">5j</span></div></div></div></main></div>`}

function getAgoraDetailScreen(){return `<div class="app-layout"><main class="main"><button class="btn btn-ghost btn-sm" style="margin-bottom:1rem" onclick="changeScreen('agora-list')">${I.arrowLeft} Retour</button><div style="margin-bottom:1.5rem"><div class="flex flex-wrap gap-2" style="margin-bottom:0.5rem"><span class="badge badge-orange">Économie</span><span class="badge badge-green">Vote</span></div><h1 class="text-xl font-bold" style="margin-bottom:0.5rem">Révision coefficient PPA</h1><p class="text-sm text-muted">Marie D. • 15 jan 2026</p></div><div class="card" style="margin-bottom:1.5rem"><div class="card-content"><div class="timeline"><div class="timeline-step" data-state="completed"><div class="timeline-icon">${I.lightbulb}</div><div class="timeline-label">Doléance</div></div><div class="timeline-connector" data-state="completed"></div><div class="timeline-step" data-state="completed"><div class="timeline-icon">${I.fileText}</div><div class="timeline-label">Proposition</div></div><div class="timeline-connector" data-state="active"></div><div class="timeline-step" data-state="active"><div class="timeline-icon">${I.vote}</div><div class="timeline-label">Vote</div></div><div class="timeline-connector"></div><div class="timeline-step"><div class="timeline-icon">${I.check}</div><div class="timeline-label">Adoption</div></div></div></div></div><div class="grid-main"><div class="card"><div class="card-header"><h3 class="card-title">Contenu</h3><button class="btn btn-ghost btn-sm" onclick="changeScreen('codex-article')">${I.externalLink} Article</button></div><div class="card-content"><div class="article-block" style="margin-bottom:1rem"><div class="article-number">Article 9 — Section 2</div><div class="article-content">Le coefficient PPA est calculé mensuellement par région...</div></div><button class="btn btn-secondary" onclick="changeScreen('forge-diff')">${I.fileDiff} Voir modifications</button></div></div><div class="space-y-5"><div class="card"><div class="card-header"><h3 class="card-title">Voter</h3></div><div class="card-content"><div class="vote-buttons" style="margin-bottom:1rem"><button class="vote-btn vote-btn-pour">${I.thumbsUp} Pour</button><button class="vote-btn vote-btn-contre">${I.thumbsDown} Contre</button></div><button class="vote-btn vote-btn-abstention w-full" style="margin-bottom:1rem">${I.minus} Abstention</button><div class="flex justify-between text-sm" style="margin-bottom:0.5rem"><span class="text-green">Pour 67%</span><span class="text-red">Contre 23%</span></div><div class="progress" style="margin-bottom:1rem"><div class="progress-bar" style="width:67%;background:var(--accent-green)"></div></div><div class="separator"></div><div class="text-center"><p class="text-sm text-muted">Fin dans</p><p class="text-xl font-bold text-violet">2j 14h 32m</p></div></div></div></div></div></main></div>`}

// CODEX
function getCodexConstitutionScreen(){return `<div class="app-layout">${getSidebar([{icon:'book',label:'Constitution',active:true},{icon:'scale',label:'Lois',onclick:"changeScreen('codex-laws')"},{icon:'fileText',label:'Décrets'},{icon:'archive',label:'Archives'}])}<main class="main"><div class="page-header"><div><h1 class="page-title">Constitution VITA</h1><p class="page-description">v1.2.0 • 29 articles</p></div><div class="flex gap-2"><button class="btn btn-secondary">${I.download} PDF</button><button class="btn btn-primary" onclick="changeScreen('forge-projects')">${I.gitBranch} Modifier</button></div></div><div class="grid-main"><div class="card"><div class="card-header"><h3 class="card-title">Sommaire</h3></div><div class="card-content"><div class="file-tree"><div class="file-tree-item" data-active="true">${I.folderOpen} <span class="font-medium">Préambule</span></div><div class="file-tree-children"><div class="file-tree-item" onclick="changeScreen('codex-article')">${I.file} Article 1 — Principes</div><div class="file-tree-item">${I.file} Article 2 — Droits</div></div><div class="file-tree-item">${I.folder} <span class="font-medium">Titre I — Système Monétaire</span></div><div class="file-tree-children"><div class="file-tree-item">${I.file} Article 3 — Unité</div><div class="file-tree-item">${I.file} Article 4 — Allocation</div></div><div class="file-tree-item">${I.folder} <span class="font-medium">Titre II — Gouvernance</span></div></div></div></div><div class="space-y-5"><div class="card"><div class="card-header"><h3 class="card-title">Modifications</h3></div><div class="card-content"><div class="space-y-3"><div class="branch-item" onclick="changeScreen('forge-merge')"><div class="branch-icon branch-icon-orange">${I.gitPullRequest}</div><div class="flex-1 min-w-0"><p class="text-sm font-medium">Révision Art. 9</p><p class="text-xs text-muted">67% pour</p></div></div><div class="branch-item"><div class="branch-icon branch-icon-green">${I.checkCircle}</div><div class="flex-1 min-w-0"><p class="text-sm font-medium">Ajout Art. 28</p><p class="text-xs text-muted">Adopté</p></div></div></div></div></div></div></div></main></div>`}

function getCodexLawsScreen(){return `<div class="app-layout">${getSidebar([{icon:'book',label:'Constitution',onclick:"changeScreen('codex-constitution')"},{icon:'scale',label:'Lois',active:true},{icon:'fileText',label:'Décrets'},{icon:'archive',label:'Archives'}])}<main class="main"><div class="page-header"><div><h1 class="page-title">Corpus Législatif</h1><p class="page-description">127 lois</p></div><button class="btn btn-primary" onclick="changeScreen('forge-projects')">${I.plus} Nouvelle loi</button></div><div class="space-y-4"><div class="card" style="padding:1.25rem"><div class="flex flex-wrap gap-2" style="margin-bottom:0.5rem"><span class="badge badge-violet">LOI-2025-042</span><span class="badge badge-green">En vigueur</span></div><h3 class="text-base font-semibold" style="margin-bottom:0.25rem">Valorisation services communautaires</h3><p class="text-sm text-secondary">12 articles • 2 amendements</p></div><div class="card" style="padding:1.25rem"><div class="flex flex-wrap gap-2" style="margin-bottom:0.5rem"><span class="badge badge-violet">LOI-2025-038</span><span class="badge badge-orange">Modification</span></div><h3 class="text-base font-semibold" style="margin-bottom:0.25rem">Coefficients de parité régionale</h3><p class="text-sm text-secondary">8 articles • 1 MR en attente</p></div></div></main></div>`}

function getCodexArticleScreen(){return `<div class="app-layout"><main class="main"><button class="btn btn-ghost btn-sm" style="margin-bottom:1rem" onclick="changeScreen('codex-constitution')">${I.arrowLeft} Constitution</button><div class="flex flex-wrap gap-2" style="margin-bottom:0.5rem"><span class="badge badge-violet">Constitution</span><span class="badge badge-cyan">v1.2.0</span></div><h1 class="text-xl font-bold" style="margin-bottom:1.5rem">Article 1 — Principes Fondamentaux</h1><div class="sub-tabs"><button class="sub-tab" data-active="true">Texte actuel</button><button class="sub-tab" onclick="changeScreen('forge-diff')">Modifications (2)</button><button class="sub-tab">Historique</button><button class="sub-tab">Discussions</button></div><div class="grid-main"><div class="card"><div class="card-content"><div class="article-block" style="margin-bottom:1.5rem;border-left-color:var(--accent-cyan)"><div class="article-number">Section 1</div><div class="article-content">Le système VITA reconnaît la valeur intrinsèque de chaque être humain. Cette valeur s'exprime par l'allocation quotidienne d'une unité monétaire (1 Ѵ).</div></div><div class="article-block" style="border-left-color:var(--accent-pink)"><div class="article-number">Section 2</div><div class="article-content">La monnaie VITA ne peut être créée que par l'allocation d'existence et la validation de services.</div></div></div></div><div class="space-y-5"><div class="card"><div class="card-header"><h3 class="card-title">Actions</h3></div><div class="card-content"><div class="space-y-2"><button class="btn btn-secondary w-full" onclick="changeScreen('forge-projects')">${I.gitBranch} Proposer modification</button><button class="btn btn-secondary w-full">${I.message} Discussion</button><button class="btn btn-secondary w-full">${I.link} Copier lien</button></div></div></div></div></div></main></div>`}

// FORGE
function getForgeProjectsScreen(){return `<div class="app-layout">${getSidebar([{icon:'layers',label:'Projets',badge:'8',badgeType:'violet',active:true},{icon:'gitBranch',label:'Branches',badge:'23',badgeType:'cyan',onclick:"changeScreen('forge-branches')"},{icon:'gitPullRequest',label:'Merge Requests',badge:'5',badgeType:'orange',onclick:"changeScreen('forge-merge')"},{icon:'gitCommit',label:'Commits',onclick:"changeScreen('forge-commits')"},{icon:'history',label:'Historique'}])}<main class="main"><div class="page-header"><div><h1 class="page-title">Projets Législatifs</h1><p class="page-description">8 projets actifs</p></div><button class="btn btn-primary">${I.plus} Nouveau projet</button></div><div class="flex flex-wrap gap-3" style="margin-bottom:1.25rem"><div class="input-wrapper flex-1" style="max-width:320px">${I.search}<input type="text" class="input" placeholder="Rechercher..."></div><select class="select"><option>Tous types</option></select><select class="select"><option>Tous statuts</option></select></div><div class="grid-3"><div class="card" style="cursor:pointer" onclick="changeScreen('forge-branches')"><div class="card-header" style="border:none;padding-bottom:0"><div class="flex items-center gap-2"><span class="badge badge-orange">Constitution</span><span class="badge badge-green">Vote</span></div></div><div class="card-content"><h3 class="text-base font-semibold" style="margin-bottom:0.5rem">Révision PPA</h3><p class="text-sm text-secondary" style="margin-bottom:1rem">Article 9 section 2</p><div class="flex items-center gap-2 text-xs"><span class="text-muted">${I.gitBranch}</span><span class="font-medium">main + 3</span></div><div class="flex justify-between text-xs" style="margin-top:0.75rem"><span class="text-muted">5 commits</span><span class="text-green font-medium">67% pour</span></div></div></div><div class="card" style="cursor:pointer" onclick="changeScreen('forge-branches')"><div class="card-header" style="border:none;padding-bottom:0"><div class="flex items-center gap-2"><span class="badge badge-green">Loi</span><span class="badge badge-cyan">Collaboratif</span></div></div><div class="card-content"><h3 class="text-base font-semibold" style="margin-bottom:0.5rem">Fonds climatique</h3><p class="text-sm text-secondary" style="margin-bottom:1rem">Nouvelle loi</p><div class="flex items-center gap-2 text-xs"><span class="text-muted">${I.gitBranch}</span><span class="font-medium">main + 7</span></div><div class="flex justify-between text-xs" style="margin-top:0.75rem"><span class="text-muted">12 commits</span><span class="text-cyan font-medium">128 contrib.</span></div></div></div><div class="card" style="cursor:pointer"><div class="card-header" style="border:none;padding-bottom:0"><div class="flex items-center gap-2"><span class="badge badge-violet">Décret</span><span class="badge badge-yellow">Examen</span></div></div><div class="card-content"><h3 class="text-base font-semibold" style="margin-bottom:0.5rem">Bonus écologiques</h3><p class="text-sm text-secondary" style="margin-bottom:1rem">Critères écologiques</p><div class="flex items-center gap-2 text-xs"><span class="text-muted">${I.gitBranch}</span><span class="font-medium">draft</span></div><div class="flex justify-between text-xs" style="margin-top:0.75rem"><span class="text-muted">3 commits</span><span class="text-yellow font-medium">Révision</span></div></div></div></div></main></div>`}

function getForgeBranchesScreen(){return `<div class="app-layout">${getSidebar([{icon:'layers',label:'Projets',onclick:"changeScreen('forge-projects')"},{icon:'gitBranch',label:'Branches',badge:'4',badgeType:'cyan',active:true},{icon:'gitPullRequest',label:'Merge Requests',badge:'2',badgeType:'orange',onclick:"changeScreen('forge-merge')"},{icon:'gitCommit',label:'Commits',onclick:"changeScreen('forge-commits')"}])}<main class="main"><button class="btn btn-ghost btn-sm" style="margin-bottom:1rem" onclick="changeScreen('forge-projects')">${I.arrowLeft} Projets</button><div class="page-header"><div><h1 class="page-title">Révision PPA</h1><p class="page-description">4 branches</p></div><button class="btn btn-primary">${I.gitFork} Créer branche</button></div><div class="sub-tabs"><button class="sub-tab" data-active="true">Branches (4)</button><button class="sub-tab" onclick="changeScreen('forge-commits')">Commits (5)</button><button class="sub-tab" onclick="changeScreen('forge-merge')">MR (2)</button><button class="sub-tab">Stats</button><button class="sub-tab">Documents</button></div><div class="space-y-4"><div class="card" style="padding:1.25rem"><div class="flex items-center justify-between" style="margin-bottom:1rem"><div class="flex items-center gap-3"><div class="branch-icon branch-icon-green">${I.gitBranch}</div><div><div class="flex items-center gap-2"><span class="font-mono text-sm font-semibold">main</span><span class="badge badge-green">Principal</span></div><p class="text-xs text-muted">Protégée</p></div></div><button class="btn btn-secondary btn-sm">${I.eye} Voir</button></div></div><div class="card" style="padding:1.25rem;cursor:pointer" onclick="changeScreen('forge-commits')"><div class="flex items-center justify-between" style="margin-bottom:1rem"><div class="flex items-center gap-3"><div class="branch-icon branch-icon-violet">${I.gitBranch}</div><div><div class="flex items-center gap-2"><span class="font-mono text-sm font-semibold">feature/calcul-regional</span><span class="badge badge-orange">MR</span></div><p class="text-xs text-muted">Marie D. • 67%</p></div></div><div class="flex gap-2"><button class="btn btn-secondary btn-sm" onclick="event.stopPropagation();changeScreen('forge-diff')">${I.fileDiff}</button><button class="btn btn-secondary btn-sm">${I.gitMerge}</button></div></div><div class="flex items-center gap-3"><span class="text-sm text-green">+2</span><span class="text-sm text-red">-1</span><div class="progress flex-1" style="max-width:200px"><div class="progress-bar" style="width:67%"></div></div><span class="text-xs text-muted">67%</span></div></div><div class="card" style="padding:1.25rem"><div class="flex items-center justify-between"><div class="flex items-center gap-3"><div class="branch-icon branch-icon-cyan">${I.gitBranch}</div><div><span class="font-mono text-sm font-semibold">feature/inflation-index</span><p class="text-xs text-muted">Lucas T.</p></div></div><button class="btn btn-secondary btn-sm">${I.eye}</button></div></div></div></main></div>`}

function getForgeCommitsScreen(){return `<div class="app-layout">${getSidebar([{icon:'layers',label:'Projets',onclick:"changeScreen('forge-projects')"},{icon:'gitBranch',label:'Branches',onclick:"changeScreen('forge-branches')"},{icon:'gitCommit',label:'Commits',active:true}])}<main class="main"><button class="btn btn-ghost btn-sm" style="margin-bottom:1rem" onclick="changeScreen('forge-branches')">${I.arrowLeft} Branches</button><div class="page-header"><div><div class="badge badge-violet font-mono" style="margin-bottom:0.25rem">feature/calcul-regional</div><h1 class="page-title">Commits</h1></div><button class="btn btn-primary">${I.plus} Commit</button></div><div class="card"><div class="card-content"><div class="commit-item"><div class="commit-line"><div class="commit-dot" style="background:var(--accent-green)"></div><div class="commit-connector"></div></div><div class="flex-1"><div class="flex items-center gap-2" style="margin-bottom:0.25rem"><span class="font-mono text-xs text-muted">a7f3c2d</span><span class="badge badge-green">Dernier</span></div><h4 class="text-sm font-semibold" style="margin-bottom:0.5rem">Ajout formule calcul régional</h4><div class="flex flex-wrap items-center gap-4 text-xs"><div class="flex items-center gap-2"><div class="avatar avatar-sm">MD</div><span>Marie D.</span></div><span class="text-muted">2h</span><div class="flex items-center gap-2"><span class="text-green">78%</span><span class="text-red">12%</span></div></div></div><button class="btn btn-secondary btn-sm" onclick="changeScreen('forge-diff')">${I.fileDiff}</button></div><div class="commit-item"><div class="commit-line"><div class="commit-dot"></div><div class="commit-connector"></div></div><div class="flex-1"><div class="flex items-center gap-2" style="margin-bottom:0.25rem"><span class="font-mono text-xs text-muted">b2e4f1a</span></div><h4 class="text-sm font-semibold" style="margin-bottom:0.5rem">Définition zones géographiques</h4><div class="flex flex-wrap items-center gap-4 text-xs"><div class="flex items-center gap-2"><div class="avatar avatar-sm">MD</div><span>Marie D.</span></div><span class="text-muted">2j</span><div class="flex items-center gap-2"><span class="text-green">85%</span></div></div></div><button class="btn btn-secondary btn-sm">${I.fileDiff}</button></div><div class="commit-item"><div class="commit-line"><div class="commit-dot"></div></div><div class="flex-1"><div class="flex items-center gap-2" style="margin-bottom:0.25rem"><span class="font-mono text-xs text-muted">c9d8e7f</span><span class="badge badge-cyan">Initial</span></div><h4 class="text-sm font-semibold">Fork depuis main</h4></div></div></div></div></main></div>`}

function getForgeMergeScreen(){return `<div class="app-layout">${getSidebar([{icon:'layers',label:'Projets',onclick:"changeScreen('forge-projects')"},{icon:'gitBranch',label:'Branches',onclick:"changeScreen('forge-branches')"},{icon:'gitPullRequest',label:'Merge Requests',active:true},{icon:'gitCommit',label:'Commits',onclick:"changeScreen('forge-commits')"}])}<main class="main"><button class="btn btn-ghost btn-sm" style="margin-bottom:1rem" onclick="changeScreen('forge-branches')">${I.arrowLeft} Branches</button><div class="flex flex-wrap gap-2" style="margin-bottom:0.5rem"><span class="badge badge-orange">MR #42</span><span class="badge badge-green">En vote</span></div><h1 class="text-xl font-bold" style="margin-bottom:0.5rem">Calcul régional PPA</h1><div class="flex items-center gap-2 text-sm text-muted" style="margin-bottom:1.5rem"><span class="font-mono">feature/calcul-regional</span><span>→</span><span class="font-mono">main</span></div><div class="sub-tabs"><button class="sub-tab" data-active="true">Résumé</button><button class="sub-tab" onclick="changeScreen('forge-diff')">Changements</button><button class="sub-tab" onclick="changeScreen('forge-commits')">Commits</button><button class="sub-tab">Discussion</button><button class="sub-tab">Documents</button></div><div class="grid-main"><div class="space-y-5"><div class="merge-indicator">${I.checkCircle}<div class="flex-1"><p class="text-sm font-medium text-green">Prêt à fusionner</p><p class="text-xs text-secondary">Aucun conflit</p></div></div><div class="card"><div class="card-header"><h3 class="card-title">Description</h3></div><div class="card-content"><p class="text-sm text-secondary" style="margin-bottom:1rem">Refonte du calcul PPA avec variations régionales dynamiques.</p><ul class="text-sm text-secondary" style="padding-left:1.25rem;list-style:disc"><li>12 zones géographiques</li><li>Calcul mensuel automatisé</li><li>Lissage sur 3 mois</li></ul></div></div><div class="card"><div class="card-header"><h3 class="card-title">Documents</h3></div><div class="card-content"><div class="space-y-3"><div class="doc-preview"><div class="doc-icon">${I.fileText}</div><div class="flex-1 min-w-0"><p class="text-sm font-medium truncate">Analyse_impact.pdf</p><p class="text-xs text-muted">2.4 MB</p></div></div><div class="doc-preview"><div class="doc-icon doc-green">${I.barChart}</div><div class="flex-1 min-w-0"><p class="text-sm font-medium truncate">Simulation.xlsx</p><p class="text-xs text-muted">156 KB</p></div></div></div></div></div></div><div class="space-y-5"><div class="card"><div class="card-header"><h3 class="card-title">Vote de fusion</h3></div><div class="card-content"><div class="vote-buttons" style="margin-bottom:1rem"><button class="vote-btn vote-btn-pour">${I.thumbsUp} Pour</button><button class="vote-btn vote-btn-contre">${I.thumbsDown} Contre</button></div><div class="flex justify-between text-sm" style="margin-bottom:0.375rem"><span class="text-green">Pour 67%</span><span class="text-red">Contre 23%</span></div><div class="vote-bar" style="margin-bottom:1rem"><div class="vote-bar-pour" style="width:67%"></div><div class="vote-bar-contre" style="width:23%"></div></div><div class="flex justify-between text-xs text-muted" style="margin-bottom:1rem"><span>847 votes</span><span>Quorum: 40%</span></div><div class="separator"></div><div class="text-center"><p class="text-sm text-muted">Fin vote</p><p class="text-lg font-bold text-violet">2j 14h 32m</p></div></div></div><div class="card"><div class="card-header"><h3 class="card-title">Règles</h3></div><div class="card-content"><div class="space-y-3"><div class="flex items-center gap-2"><span class="text-green">${I.check}</span><span class="text-sm">Majorité >50%</span></div><div class="flex items-center gap-2"><span class="text-green">${I.check}</span><span class="text-sm">Quorum 40%</span></div><div class="flex items-center gap-2"><span class="text-green">${I.check}</span><span class="text-sm">Délai 7 jours</span></div><div class="flex items-center gap-2"><span class="text-muted">${I.clock}</span><span class="text-sm text-muted">En cours</span></div></div></div></div></div></div></main></div>`}

function getForgeDiffScreen(){return `<div class="app-layout"><main class="main"><button class="btn btn-ghost btn-sm" style="margin-bottom:1rem" onclick="changeScreen('forge-merge')">${I.arrowLeft} Merge Request</button><div class="page-header"><div><h1 class="page-title">Changements</h1><p class="page-description">3 fichiers • +24 -8</p></div><div class="flex gap-2"><button class="btn btn-secondary">${I.copy} Copier</button><button class="btn btn-primary">${I.message} Commenter</button></div></div><div class="sub-tabs"><button class="sub-tab" data-active="true">Unifié</button><button class="sub-tab">Côte à côte</button></div><div class="space-y-5"><div class="diff-container"><div class="diff-header flex items-center justify-between"><div class="flex items-center gap-2">${I.file}<span class="font-mono">constitution/art-9-section-2.md</span></div><div class="flex items-center gap-2 text-xs"><span class="text-green">+12</span><span class="text-red">-4</span></div></div><div class="diff-line"><div class="diff-line-number">1</div><div class="diff-line-content">## Article 9 — Coefficients</div></div><div class="diff-line"><div class="diff-line-number">2</div><div class="diff-line-content"></div></div><div class="diff-line"><div class="diff-line-number">3</div><div class="diff-line-content">### Section 2 — Calcul PPA</div></div><div class="diff-line diff-remove"><div class="diff-line-number">4</div><div class="diff-line-content">Le coefficient PPA est fixé annuellement.</div></div><div class="diff-line diff-add"><div class="diff-line-number">4</div><div class="diff-line-content">Le coefficient PPA est calculé mensuellement par zone.</div></div><div class="diff-line diff-add"><div class="diff-line-number">5</div><div class="diff-line-content">Les zones sont définies comme suit :</div></div><div class="diff-line diff-add"><div class="diff-line-number">6</div><div class="diff-line-content">- Zone A : Europe occidentale</div></div><div class="diff-line diff-add"><div class="diff-line-number">7</div><div class="diff-line-content">- Zone B : Europe orientale</div></div></div><div class="card"><div class="card-header"><h3 class="card-title">Commentaires</h3></div><div class="card-content"><div class="comment" style="margin-bottom:1rem"><div class="avatar avatar-sm avatar-cyan">LT</div><div class="comment-content"><div class="flex items-center gap-2" style="margin-bottom:0.375rem"><span class="text-sm font-medium">Lucas T.</span><span class="text-xs text-muted">1j</span></div><p class="text-sm text-secondary">Ajouter l'Océanie comme zone distincte ?</p></div></div><div class="comment"><div class="avatar avatar-sm">MD</div><div class="comment-content"><div class="flex items-center gap-2" style="margin-bottom:0.375rem"><span class="text-sm font-medium">Marie D.</span><span class="text-xs text-muted">23h</span></div><p class="text-sm text-secondary">Bonne idée, ajouté dans le prochain commit.</p></div></div></div></div></div></main></div>`}

// CIVIS
function getCivisProfileScreen(){return `<div class="app-layout">${getSidebar([{icon:'user',label:'Profil',active:true},{icon:'wallet',label:'Portefeuille',onclick:"changeScreen('civis-wallet')"},{icon:'users',label:'Délégations'},{icon:'history',label:'Historique'},{icon:'settings',label:'Paramètres'}])}<main class="main"><div class="card" style="margin-bottom:1.5rem"><div class="card-content" style="text-align:center;padding:2rem"><div class="avatar avatar-xl" style="margin:0 auto 1.25rem">JD</div><h1 class="text-xl font-bold" style="margin-bottom:0.5rem">Jean Dupont</h1><div class="flex flex-wrap justify-center gap-2" style="margin-bottom:1rem"><span class="badge badge-green">Vérifié</span><span class="badge badge-violet">Délégué</span></div><div class="flex justify-center gap-8"><div><p class="text-2xl font-bold text-violet">324</p><p class="text-xs text-muted">Jours</p></div><div><p class="text-2xl font-bold text-pink">89%</p><p class="text-xs text-muted">Participation</p></div><div><p class="text-2xl font-bold text-cyan">156</p><p class="text-xs text-muted">Délégants</p></div></div></div></div><div class="grid-2"><div class="card"><div class="card-header"><h3 class="card-title">Fiabilité</h3></div><div class="card-content text-center"><p class="text-4xl font-bold text-violet" style="margin-bottom:1rem">87</p><div class="space-y-3"><div><div class="flex justify-between text-sm" style="margin-bottom:0.25rem"><span class="text-muted">Engagements</span><span>92%</span></div><div class="progress"><div class="progress-bar" style="width:92%"></div></div></div><div><div class="flex justify-between text-sm" style="margin-bottom:0.25rem"><span class="text-muted">Participation</span><span>89%</span></div><div class="progress progress-cyan"><div class="progress-bar" style="width:89%"></div></div></div></div></div></div><div class="card"><div class="card-header"><h3 class="card-title">Activité</h3></div><div class="card-content"><div class="space-y-4"><div class="flex items-start gap-3"><div class="branch-icon branch-icon-green">${I.vote}</div><div class="flex-1 min-w-0"><p class="text-sm font-medium">Vote enregistré</p><p class="text-xs text-muted truncate">Révision PPA</p></div><span class="text-xs text-muted">2h</span></div><div class="flex items-start gap-3"><div class="branch-icon branch-icon-cyan">${I.gitCommit}</div><div class="flex-1 min-w-0"><p class="text-sm font-medium">Commit approuvé</p><p class="text-xs text-muted truncate">Zones géographiques</p></div><span class="text-xs text-muted">1j</span></div></div></div></div></div></main></div>`}

function getCivisWalletScreen(){return `<div class="app-layout">${getSidebar([{icon:'user',label:'Profil',onclick:"changeScreen('civis-profile')"},{icon:'wallet',label:'Portefeuille',active:true},{icon:'users',label:'Délégations'},{icon:'history',label:'Historique'},{icon:'settings',label:'Paramètres'}])}<main class="main"><div class="stat-card stat-card-violet" style="margin-bottom:1.5rem;padding:2rem"><p class="text-sm" style="opacity:0.8;margin-bottom:0.5rem">Solde total</p><p class="text-4xl font-bold" style="margin-bottom:0.25rem">1,247.50 <span class="text-xl" style="opacity:0.7">Ѵ</span></p><p class="text-sm" style="opacity:0.7">≈ 1,185 € (PPA France)</p><div class="flex gap-3" style="margin-top:1.5rem"><button class="btn" style="background:rgba(255,255,255,0.2);color:white">${I.send} Envoyer</button><button class="btn" style="background:rgba(255,255,255,0.2);color:white">${I.qrcode} Recevoir</button></div></div><div class="grid-2"><div class="card"><div class="card-header"><h3 class="card-title">Transactions</h3></div><div class="card-content"><div class="space-y-3"><div class="flex items-center justify-between"><div class="flex items-center gap-3"><div class="branch-icon branch-icon-green">${I.arrowDown}</div><div><p class="text-sm font-medium">Allocation</p><p class="text-xs text-muted">Système</p></div></div><span class="text-sm font-semibold text-green">+1.00 Ѵ</span></div><div class="flex items-center justify-between"><div class="flex items-center gap-3"><div class="branch-icon branch-icon-orange">${I.arrowUp}</div><div><p class="text-sm font-medium">Paiement</p><p class="text-xs text-muted">Marie D.</p></div></div><span class="text-sm font-semibold text-red">-15.00 Ѵ</span></div></div></div></div><div class="card"><div class="card-header"><h3 class="card-title">Sources</h3></div><div class="card-content"><div class="space-y-3"><div><div class="flex justify-between text-sm" style="margin-bottom:0.25rem"><span class="text-muted">Allocation</span><span>30 Ѵ</span></div><div class="progress"><div class="progress-bar" style="width:30%"></div></div></div><div><div class="flex justify-between text-sm" style="margin-bottom:0.25rem"><span class="text-muted">Services</span><span>67.5 Ѵ</span></div><div class="progress progress-cyan"><div class="progress-bar" style="width:45%"></div></div></div></div></div></div></div></main></div>`}

// PANORAMA
function getPanoramaDashboardScreen(){const mapHtml=`<div class="world-map-container"><svg class="world-map-svg" viewBox="0 0 1000 500" preserveAspectRatio="xMidYMid slice"><defs><linearGradient id="mg"><stop offset="0%" stop-color="#8b5cf6"/><stop offset="100%" stop-color="#ec4899"/></linearGradient></defs><path class="land" d="M150,120 Q200,80 280,90 L320,110 Q340,140 320,180 L280,220 Q240,260 180,240 L140,200 Q120,160 150,120 Z"/><path class="land" d="M240,280 Q280,260 300,290 L310,350 Q290,400 260,420 L230,400 Q200,350 220,300 Z"/><path class="land" d="M480,100 Q520,80 560,90 L580,120 Q570,150 540,160 L500,150 Q470,130 480,100 Z"/><path class="land" d="M480,180 Q520,160 560,180 L580,240 Q570,320 530,360 L490,340 Q460,280 480,180 Z"/><path class="land" d="M600,80 Q700,60 800,100 L850,150 Q860,200 820,240 L750,260 Q680,240 620,200 L580,150 Q590,100 600,80 Z"/><path class="land" d="M780,320 Q820,300 860,320 L880,360 Q860,400 820,400 L780,380 Q760,350 780,320 Z"/><circle class="map-marker map-marker-pulse" cx="500" cy="130" r="6" fill="url(#mg)"/><circle class="map-marker map-marker-pulse" cx="260" cy="150" r="8" fill="url(#mg)"/><circle class="map-marker map-marker-pulse" cx="820" cy="160" r="7" fill="url(#mg)"/><circle class="map-marker map-marker-pulse" cx="680" cy="220" r="6" fill="url(#mg)"/></svg><div class="map-legend"><div class="map-legend-item"><div class="map-legend-dot" style="background:var(--accent-violet)"></div>Europe</div><div class="map-legend-item"><div class="map-legend-dot" style="background:var(--accent-pink)"></div>Amériques</div><div class="map-legend-item"><div class="map-legend-dot" style="background:var(--accent-cyan)"></div>Asie</div></div><div class="map-stats"><div class="map-stat-item"><div class="map-stat-value">142</div><div class="map-stat-label">Pays</div></div></div></div>`;return `<div class="app-layout">${getSidebar([{icon:'globe',label:'Dashboard',active:true},{icon:'coins',label:'Économie'},{icon:'users',label:'Citoyens'},{icon:'vote',label:'Votes'},{icon:'gitBranch',label:'Projets',onclick:"changeScreen('forge-projects')"}])}<main class="main"><div class="page-header"><div><h1 class="page-title">Dashboard Global</h1><p class="page-description">Temps réel</p></div><button class="btn btn-secondary">${I.download} Export</button></div><div class="card" style="margin-bottom:1.5rem"><div class="card-header"><h3 class="card-title">Activité mondiale</h3></div><div class="card-content">${mapHtml}</div></div><div class="grid-4" style="margin-bottom:1.5rem"><div class="stat-card stat-card-violet"><p class="stat-label">Citoyens</p><p class="stat-value">27,324</p><span class="stat-trend stat-trend-up">${I.trendUp} 3.2%</span></div><div class="stat-card stat-card-pink"><p class="stat-label">Masse Ѵ</p><p class="stat-value">2.4M</p><span class="stat-trend stat-trend-up">${I.trendUp} 1.8%</span></div><div class="stat-card stat-card-cyan"><p class="stat-label">Tx/jour</p><p class="stat-value">12,847</p><span class="stat-trend stat-trend-up">${I.trendUp} 5.4%</span></div><div class="stat-card stat-card-green"><p class="stat-label">Projets</p><p class="stat-value">8</p><span class="stat-trend stat-trend-up">${I.trendUp} 2</span></div></div><div class="grid-2"><div class="card"><div class="card-header"><h3 class="card-title">Votes actifs</h3><button class="btn btn-ghost btn-sm text-violet" onclick="changeScreen('agora-list')">Voir</button></div><div class="card-content"><div class="space-y-3"><div class="branch-item" onclick="changeScreen('forge-merge')"><div class="branch-icon branch-icon-orange">${I.gitPullRequest}</div><div class="flex-1 min-w-0"><p class="text-sm font-medium">Révision PPA</p><p class="text-xs text-muted">67% • 2j</p></div></div><div class="branch-item"><div class="branch-icon branch-icon-green">${I.vote}</div><div class="flex-1 min-w-0"><p class="text-sm font-medium">Fonds climatique</p><p class="text-xs text-muted">45% • 5j</p></div></div></div></div></div><div class="card"><div class="card-header"><h3 class="card-title">Projets récents</h3><button class="btn btn-ghost btn-sm text-violet" onclick="changeScreen('forge-projects')">Voir</button></div><div class="card-content"><div class="space-y-3"><div class="branch-item" onclick="changeScreen('forge-branches')"><div class="branch-icon branch-icon-violet">${I.gitBranch}</div><div class="flex-1 min-w-0"><p class="text-sm font-medium">Révision Art. 9</p><p class="text-xs text-muted">4 branches</p></div></div><div class="branch-item"><div class="branch-icon branch-icon-cyan">${I.layers}</div><div class="flex-1 min-w-0"><p class="text-sm font-medium">Bonus écologiques</p><p class="text-xs text-muted">Révision</p></div></div></div></div></div></div></main></div>`}

const screens={'agora-list':getAgoraListScreen,'agora-detail':getAgoraDetailScreen,'codex-constitution':getCodexConstitutionScreen,'codex-laws':getCodexLawsScreen,'codex-article':getCodexArticleScreen,'forge-projects':getForgeProjectsScreen,'forge-branches':getForgeBranchesScreen,'forge-commits':getForgeCommitsScreen,'forge-merge':getForgeMergeScreen,'forge-diff':getForgeDiffScreen,'civis-profile':getCivisProfileScreen,'civis-wallet':getCivisWalletScreen,'panorama-dashboard':getPanoramaDashboardScreen};

function changeScreen(s){if(!screens[s])return;currentScreen=s;currentModule=s.split('-')[0];document.getElementById('app-content').innerHTML=screens[s]();document.querySelectorAll('.nav-item').forEach(el=>el.setAttribute('data-active','false'));document.getElementById('nav-'+currentModule)?.setAttribute('data-active','true');document.getElementById('screenSelector').value=s;document.getElementById('mobileScreenSelector').value=s}
function setModule(m){const first=screensByModule[m]?.[0]?.id;if(first)changeScreen(first)}
buildNav();changeScreen('agora-list');
</script>
</body>
</html>
